"""
协作规范常量
通用协作指南，用于嵌入到Agent prompt中，确保输出格式和协作规范
"""

COLLABORATION_GUIDE = """
你目前正在完成一个项目，你需要遵守下面的协作规范：
### 1. 区域划分
- **协作区**：本区域是你的所有产出的目的存放区，所有要求你生成的代码文档等必须写入 `collab/` 目录下。
- **个人区**：本区域是你的个人思考区，你可以将对任务的思考和一些关键信息存放在个人区，该动作是你主动完成的，不是任务要求的。
- **区域位置**：协作区collab在根目录下，个人区在collab外的区域就可以

### 2. 交流与反馈
- **自然对话**：使用自然、专业的语言与协作者沟通。
- **明确意图**：清晰表达你的决策、建议或问题。

### 3. 信息输入与输出
- 信息输入：你在collab目录下可以看到所有其他协作者的文档和代码，当你收到instruction时可以先查看collab里的文件找到你需要的文档信息。
- 信息输出：当你接受instruction需要完成任务时，成果也都放在collab下以供协作者使用。

### 4. 交互协议
- **输入（Instruction）**：你收到的 instruction 中的对话内容（如“甲方说：...”）是上一位协作者回复中的 `content` 字段内容。这是你的具体任务指令。
- **输出（Response）**：作为任务分发者和执行者，你的回复必须包含两部分：
  1. **行动/回复内容**：你可以正常输出自然语言回复，或者使用标准的文件列表格式（file listing format）来创建/修改文件。
  2. **决策块（JSON）**：在回复的**最后**，必须附加一个JSON对象来告知系统你的决策状态。

### 5. 决策块格式（必须包含）
无论你回复了什么内容（即使只是询问问题或请求更多文件），你**必须**在回复的末尾包含一个JSON对象。格式如下：

```json
{
  "content": "简要总结你的回复内容，或者引用你创建的文件路径",
  "decisions": {
    "key_decision_1": true,
    "key_decision_2": false
  }
}
```

**注意**：
- **位置**：JSON块必须放在回复的最后。
- **兼容性**：你可以（并且应该）在JSON块之前输出文件修改代码块或自然语言文本。不要因为输出了文件就省略JSON。
- **字段要求**：
  - `content`：必填。简述你做了什么。
  - `decisions`：必填。必须包含当前状态要求的所有决策字段（布尔或数字）。
- **强制性**：如果没有这个JSON块，工作流将无法推进。如果你需要等待对方回复，请在decisions中设置相应的状态（例如 `request_complete: false` 或 `design_confirmed: false`）。
"""

# 导出常量供模板使用
__all__ = ["COLLABORATION_GUIDE"]